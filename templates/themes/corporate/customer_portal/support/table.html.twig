{% trans_default_domain 'customer_portal' %}

{% set table_actions %}
    {% block table_actions %}{% endblock %}
{% endset %}

{% set body_rows = [] %}

{% for ticket in tickets %}
    {% set body_rows = body_rows|merge([{ cols: [
        { content: ticket.id },
        { content: ticket.priority },
        { content: ticket.type },
        { content: ticket.subject },
        { content: ticket.due|ibexa_short_datetime },
        { content: ticket.created|ibexa_short_datetime },
        { content: ticket.updated|ibexa_short_datetime },
    ] }]) %}
{% endfor %}

{% embed '@ibexadesign/ui/component/table/table.html.twig' with {
    headline,
    head_cols: [
        { content: 'customer_portal.support.table.header.ticket_id'|trans|desc('Ticket ID') },
        { content: 'customer_portal.support.table.header.priority'|trans|desc('Priority') },
        { content: 'customer_portal.support.table.header.type'|trans|desc('type') },
        { content: 'customer_portal.support.table.header.subject'|trans|desc('Subject') },
        { content: 'customer_portal.support.table.header.due_date'|trans|desc('Due') },
        { content: 'customer_portal.support.table.header.created_date'|trans|desc('Created') },
        { content: 'customer_portal.support.table.header.updated_date'|trans|desc('Updated') },
        { },
    ],
    body_rows,
    empty_table_info_text: 'tickets.table.empty.info'|trans|desc('No tickets'),
} %}
    {% block header %}
        {% embed '@ibexadesign/ui/component/table/table_header.html.twig' %}
            {% block actions %}
                {{ table_actions }}
            {% endblock %}
        {% endembed %}
    {% endblock %}
{% endembed %}
